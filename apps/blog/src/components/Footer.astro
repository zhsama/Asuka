---
import AsukaConfig from "../../asuka.config";
import { getTranslation } from "@/i18n/translation";
import type { Locale } from "@/i18n/translation";
import I18nKeys from "../i18n/keys";

const locale = AsukaConfig.locale as Locale;
const currentYear = new Date().getFullYear();
---

<footer class="footer">
  <div class="footer-container">
    <!-- Author Info Section -->
    <div class="author-section">
      <div class="author-avatar">
        <img src={AsukaConfig.avatarUrl} alt="Author Avatar" />
      </div>
      <div class="author-info">
        <h3 class="author-name">{AsukaConfig.username}</h3>
        <p class="author-sign">{AsukaConfig.sign}</p>
        <div class="social-links">
          {AsukaConfig.socialLinks.map((link) => (
            <a href={link.link} class="social-link" target="_blank" rel="noopener noreferrer">
              <span class="social-icon">{link.icon.includes('github') ? '🐙' : link.icon.includes('bilibili') ? '📺' : '📧'}</span>
            </a>
          ))}
        </div>
      </div>
    </div>

    <!-- Links Section -->
    <div class="links-section">
      <div class="link-column">
        <h4 class="link-title">导航</h4>
        <ul class="link-list">
          {AsukaConfig.navigators.slice(0, 4).map((nav) => (
            <li>
              <a href={nav.href} class="footer-link">
                {getTranslation(locale)}
              </a>
            </li>
          ))}
        </ul>
      </div>
      
      <div class="link-column">
        <h4 class="link-title">订阅</h4>
        <ul class="link-list">
          <li><a href="/rss.xml" class="footer-link">RSS 订阅</a></li>
          <li><a href="/sitemap-index.xml" class="footer-link">站点地图</a></li>
        </ul>
      </div>

      {AsukaConfig.friendLinks && AsukaConfig.friendLinks.length > 0 && (
        <div class="link-column">
          <h4 class="link-title">友链</h4>
          <ul class="link-list">
            {AsukaConfig.friendLinks.slice(0, 3).map((friend) => (
              <li>
                <a href={friend.url} class="footer-link" target="_blank" rel="noopener noreferrer">
                  {friend.name}
                </a>
              </li>
            ))}
            {AsukaConfig.friendLinks.length > 3 && (
              <li>
                <a href="/friends" class="footer-link">查看更多</a>
              </li>
            )}
          </ul>
        </div>
      )}
    </div>
  </div>

  <!-- Copyright Section -->
  <div class="copyright-section">
    <div class="copyright-divider"></div>
    <div class="copyright-content">
      <p class="copyright-text">
        © {currentYear} {AsukaConfig.username}. All Rights Reserved.
      </p>
      <p class="powered-by">
        Powered by <a href="https://astro.build/" class="footer-link" target="_blank" rel="noopener noreferrer">Astro</a>
        {AsukaConfig.license && (
          <span> · Licensed under <a href={AsukaConfig.license.url} class="footer-link" target="_blank" rel="noopener noreferrer">{AsukaConfig.license.name}</a></span>
        )}
      </p>
    </div>
  </div>
</footer>

<style>
  @reference "tailwindcss";

  .footer {
    @apply mt-16 bg-gray-50 dark:bg-gray-900;
  }

  .footer-container {
    @apply mx-auto max-w-6xl px-4 py-12 lg:px-6;
  }

  /* Author Section */
  .author-section {
    @apply mb-8 flex flex-col items-center text-center sm:flex-row sm:text-left;
  }

  .author-avatar {
    @apply mb-4 sm:mb-0 sm:mr-6;
  }

  .author-avatar img {
    @apply h-20 w-20 rounded-full object-cover ring-4 ring-blue-100 dark:ring-blue-900;
  }

  .author-info {
    @apply flex-1;
  }

  .author-name {
    @apply text-2xl font-bold text-gray-900 dark:text-white;
  }

  .author-sign {
    @apply mt-1 text-gray-600 dark:text-gray-300;
  }

  .social-links {
    @apply mt-4 flex justify-center space-x-4 sm:justify-start;
  }

  .social-link {
    @apply flex h-10 w-10 items-center justify-center rounded-full bg-white text-gray-600 shadow-sm transition-colors;
    @apply hover:bg-blue-50 hover:text-blue-600;
    @apply dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-blue-900 dark:hover:text-blue-400;
  }

  /* Links Section */
  .links-section {
    @apply grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3;
  }

  .link-column {
    @apply text-center sm:text-left;
  }

  .link-title {
    @apply mb-4 text-lg font-semibold text-gray-900 dark:text-white;
  }

  .link-list {
    @apply space-y-2;
  }

  .footer-link {
    @apply text-gray-600 transition-colors hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400;
  }

  /* Copyright Section */
  .copyright-section {
    @apply mt-8;
  }

  .copyright-divider {
    @apply h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent dark:via-gray-700;
  }

  .copyright-content {
    @apply pt-8 text-center;
  }

  .copyright-text {
    @apply text-gray-600 dark:text-gray-400;
  }

  .powered-by {
    @apply mt-2 text-sm text-gray-500 dark:text-gray-500;
  }
</style> 